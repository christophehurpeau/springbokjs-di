{"version":3,"sources":["../src/index.js"],"names":[],"mappings":";;;;;;;AAAA,IAAI,EAAE,GAAG,OAAO,CAAC,sBAAsB,CAAC,CAAC;;IAClC,EAAE,2BAAM,MAAM;;QAEZ,EAAE,GAAF,EAAE;AAEJ,IAAI,SAAS,GAAG,mBAAS,EAAE,EAAE,KAAK,EAAE;AACvC,QAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;AACvB,aAAK,GAAG,CAAE,KAAK,CAAE,CAAC;KACrB;AACD,QAAI,UAAU,GAAG,EAAE,CAAC;AACpB,WAAO,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,UAAC,IAAI,EAAK;AACnC,eAAO,EAAE,CAAC,sBAAsB,CAAC,IAAI,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,EAAE,UAAC,IAAI,EAAK;AAClE,gBAAI,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,KAAK,EAAE;AACnC,uBAAO;aACV;AACD,gBAAI,MAAM,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAChC,gBAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACtC,gBAAI,MAAM,GAAG,EAAE,CAAC,SAAS,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;AACxC,kBAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,UAAC,GAAG,EAAK;AACjC,oBAAI,MAAM,CAAC,GAAG,CAAC,CAAC,SAAS,EAAE;AACvB,8BAAU,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;iBACxB;aACJ,CAAC,CAAC;SACN,CAAC,CAAC;KACN,CAAC,CAAC,CAAC,IAAI,CAAC,YAAM;AACX,eAAO,EAAE,CAAC,sBAAsB,CAAC,UAAU,CAAC,CAAC;KAChD,CAAC,CAAC,IAAI,CAAC;eAAM,EAAE;KAAA,CAAC,CAAC;CACrB,CAAC;QAtBS,SAAS,GAAT,SAAS","file":"src/index.js","sourcesContent":["var fs = require('springbokjs-utils/fs');\nimport Di from './Di';\n\nexport { Di };\n\nexport var directory = function(di, paths) {\n    if (!Array.isArray(paths)) {\n        paths = [ paths ];\n    }\n    var singletons = [];\n    return Promise.all(paths.map((path) => {\n        return fs.readRecursiveDirectory(path, { recursive: true }, (file) => {\n            if (file.filename.slice(-3) !== '.js') {\n                return;\n            }\n            var module = require(file.path);\n            var name = file.filename.slice(0, -3);\n            var values = di.addModule(name, module);\n            Object.keys(values).forEach((key) => {\n                if (values[key].singleton) {\n                    singletons.push(key);\n                }\n            });\n        });\n    })).then(() => {\n        return di._instantiateSingletons(singletons);\n    }).then(() => di);\n};\n"]}